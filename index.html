<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>NetworkProject ENS</title>

    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script type="text/javascript" src="./node_modules/jquery/dist/jquery.min.js"></script>
    <script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="./node_modules/web3/dist/web3.min.js"> </script> </head> <body>
</head>

<body>
    <h1>Hello, world!</h1>

    <script>
        if (typeof web3 !== "undefined") web3 = new Web3(web3.currentProvider);
        else web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));

        // set default Account
        web3.eth.defaultAccount = web3.eth.accounts[0];

        // load contract
        let ENSContract = web3.eth.contract(
            [
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "dname",
                            "type": "bytes32"
                        }
                    ],
                    "name": "query_n2a",
                    "outputs": [
                        {
                            "name": "",
                            "type": "address"
                        }
                    ],
                    "payable": true,
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "withdraw",
                    "outputs": [
                        {
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "dname",
                            "type": "bytes32"
                        },
                        {
                            "name": "to_owner",
                            "type": "address"
                        }
                    ],
                    "name": "transfer_owner",
                    "outputs": [
                        {
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "payable": true,
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "constant": true,
                    "inputs": [],
                    "name": "owner",
                    "outputs": [
                        {
                            "name": "",
                            "type": "address"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "dname",
                            "type": "bytes32"
                        },
                        {
                            "name": "to_addr",
                            "type": "address"
                        }
                    ],
                    "name": "change_address",
                    "outputs": [
                        {
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "payable": true,
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "dname",
                            "type": "bytes32"
                        },
                        {
                            "name": "addr",
                            "type": "address"
                        }
                    ],
                    "name": "register",
                    "outputs": [
                        {
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "payable": true,
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "addr",
                            "type": "address"
                        }
                    ],
                    "name": "query_a2n",
                    "outputs": [
                        {
                            "name": "",
                            "type": "bytes32"
                        }
                    ],
                    "payable": true,
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": false,
                            "name": "dname",
                            "type": "bytes32"
                        },
                        {
                            "indexed": false,
                            "name": "addr",
                            "type": "address"
                        },
                        {
                            "indexed": false,
                            "name": "holder",
                            "type": "address"
                        }
                    ],
                    "name": "e_register",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": false,
                            "name": "dname",
                            "type": "bytes32"
                        },
                        {
                            "indexed": false,
                            "name": "addr",
                            "type": "address"
                        }
                    ],
                    "name": "e_change_addr",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": false,
                            "name": "dname",
                            "type": "bytes32"
                        },
                        {
                            "indexed": false,
                            "name": "owner",
                            "type": "address"
                        }
                    ],
                    "name": "e_transfer_owner",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": false,
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "e_withdraw",
                    "type": "event"
                }
            ]
        );
        let ENS = ENSContract.at('0x1d0a2077bd1f92ca97ccebfd2d6b9b9fdf60afa2');

        $("#button").click(function () {
            ENS.
                Courses.setInstructor($("#name").val(), $("#age").val());
        });
        Courses.getInstructor(function (error, result) {
            if (!error) {
                $("#instructor").html(result[0] +"("+result[1] +" years old) ");
                console.log(result);
            } else
                console.error(error);
            });
    </script>
    </body>

</html>